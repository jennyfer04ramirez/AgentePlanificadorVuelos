<div class="min-h-screen bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center px-4">
  <div class="w-full max-w-2xl bg-white rounded-2xl shadow-xl p-8">

    <!-- Header -->
    <div class="text-center mb-6">
      <h1 class="text-3xl font-bold text-slate-800">
        Function Selection
      </h1>
      <p class="text-slate-500 mt-1">
        Sistema de selección de funciones por embeddings 
      </p>
    </div>

    <!-- Input -->
    <div class="mb-4">
      <label class="block text-sm font-medium text-slate-600 mb-2">
        Consulta del usuario
      </label>
      <textarea
        [(ngModel)]="query"
        rows="3"
        placeholder="Ej: quiero un plan de 3 días en quito"
        class="w-full resize-none rounded-xl border border-slate-300 p-4 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
      ></textarea>
    </div>

    <!-- Button -->
    <button
      (click)="search()"
      class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-xl transition flex items-center justify-center gap-2"
    >
      <span *ngIf="!loading">Seleccionar función</span>
      <span *ngIf="loading">Analizando intención…</span>
    </button>

    <!-- Results -->
    <div *ngIf="results.length > 0" class="mt-8">
      <h2 class="text-lg font-semibold text-slate-700 mb-4">
        Resultados (Top-K)
      </h2>

      <div class="space-y-3">
        <div
          *ngFor="let r of results; let i = index"
          class="rounded-xl p-4 border transition"
          [ngClass]="
            i === 0
              ? 'border-green-400 bg-green-50'
              : 'border-slate-200 bg-slate-50'
          "
        >
          <div class="flex items-center justify-between">
            <div>
              <p
                class="font-semibold"
                [ngClass]="i === 0 ? 'text-green-700' : 'text-slate-800'"
              >
                {{ r.name }}
              </p>
              <p class="text-sm text-slate-500">
                Similitud: {{ r.score | number:'1.2-2' }}
              </p>
            </div>

            <!-- Badge -->
            <span
              *ngIf="i === 0"
              class="text-xs font-semibold bg-green-600 text-white px-3 py-1 rounded-full"
            >
              Top-1
            </span>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>
